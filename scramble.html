<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scramble Game Demo</title>
<style>
  body { background: #111; color: #fff; font-family: sans-serif; display: flex; justify-content: center; padding: 20px; }
  .container { width: 100%; max-width: 400px; }
  .scramble-banner { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px; margin-bottom: 10px; text-align: center; display: none; }
  .letters { font-size: 24px; letter-spacing: 6px; margin-bottom: 10px; color: #FF1493; }
  input, button { padding: 8px 12px; border-radius: 8px; border: none; margin: 2px; font-size: 14px; }
  input { width: calc(100% - 100px); }
  button { cursor: pointer; background: #FF1493; color: #000; font-weight: bold; }
  button:hover { background: #FF69B4; }
  #messages { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 10px; height: 200px; overflow-y: auto; margin-bottom: 10px; display: flex; flex-direction: column; gap: 5px; }
  .msg { padding: 6px 10px; border-radius: 6px; background: rgba(255,20,147,0.2); }
  .star-popup { position: fixed; top: 20%; left: 50%; transform: translateX(-50%); background: #222; padding: 10px 16px; border-radius: 8px; border: 1px solid #FF1493; color: #FF1493; display: none; font-weight: bold; z-index: 1000; }
</style>
</head>
<body>
<div class="container">
  <div class="scramble-banner" id="scrambleBanner">
    <div class="letters" id="scrambleLetters"></div>
    <input type="text" id="scrambleInput" placeholder="Type a word">
    <button id="scrambleSubmitBtn">Submit</button>
  </div>
  <button id="startScrambleBtn">Start Scramble</button>
  <div id="messages"></div>
  <div>Stars: <span id="starCount">0</span>⭐</div>
</div>

<div class="star-popup" id="starPopup">+0 Stars!</div>

<script>
  const SCRAMBLE_DURATION = 60000; // 1 min
  const SCRAMBLE_LETTER_COUNT = 7;
  const SCRAMBLE_STAR_REWARD = 10;
  const lettersPool = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

  const scrambleBannerEl = document.getElementById("scrambleBanner");
  const scrambleLettersEl = document.getElementById("scrambleLetters");
  const scrambleInputEl = document.getElementById("scrambleInput");
  const scrambleSubmitBtn = document.getElementById("scrambleSubmitBtn");
  const startScrambleBtn = document.getElementById("startScrambleBtn");
  const messagesEl = document.getElementById("messages");
  const starPopupEl = document.getElementById("starPopup");
  const starCountEl = document.getElementById("starCount");

  let currentScramble = null;
  let scrambleTimeout = null;
  let submittedWords = new Set();
  let stars = 0;

  function showStarPopup(text) {
    starPopupEl.innerText = text;
    starPopupEl.style.display = "block";
    setTimeout(() => { starPopupEl.style.display = "none"; }, 1500);
  }

  function generateLetters() {
    let letters = [];
    for (let i = 0; i < SCRAMBLE_LETTER_COUNT; i++) {
      letters.push(lettersPool[Math.floor(Math.random() * lettersPool.length)]);
    }
    return letters;
  }

  function validateWord(word) {
    if (!currentScramble) return false;
    word = word.toUpperCase();
    const available = [...currentScramble];
    for (let char of word) {
      const idx = available.indexOf(char);
      if (idx === -1) return false;
      available.splice(idx,1);
    }
    return true;
  }

  function startScramble() {
    const letters = generateLetters();
    currentScramble = letters;
    submittedWords.clear();
    scrambleBannerEl.style.display = "block";
    scrambleLettersEl.textContent = letters.join(" ");
    scrambleInputEl.value = "";
    showStarPopup("Scramble started!");

    if (scrambleTimeout) clearTimeout(scrambleTimeout);
    scrambleTimeout = setTimeout(() => {
      scrambleBannerEl.style.display = "none";
      currentScramble = null;
      showStarPopup("Scramble ended!");
    }, SCRAMBLE_DURATION);
  }

  function submitScrambleWord() {
    const word = scrambleInputEl.value.trim().toUpperCase();
    if (!word) return;
    if (!validateWord(word)) { showStarPopup("Invalid word!"); return; }
    if (submittedWords.has(word)) { showStarPopup("Already submitted!"); return; }
    submittedWords.add(word);
    stars += SCRAMBLE_STAR_REWARD;
    starCountEl.textContent = stars;
    messagesEl.innerHTML += `<div class="msg">✅ ${word} (+${SCRAMBLE_STAR_REWARD}⭐)</div>`;
    messagesEl.scrollTop = messagesEl.scrollHeight;
    showStarPopup(`+${SCRAMBLE_STAR_REWARD} Stars!`);
    scrambleInputEl.value = "";
  }

  startScrambleBtn.addEventListener("click", startScramble);
  scrambleSubmitBtn.addEventListener("click", submitScrambleWord);
  scrambleInputEl.addEventListener("keypress", (e) => {
    if (e.key === "Enter") submitScrambleWord();
  });
</script>
</body>
</html>