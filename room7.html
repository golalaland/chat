<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Girls Sign Up / Login</title>
<style>
  body {
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background:#000;
    color:#fff;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
  }
  .container {
    width: 95%;
    max-width: 380px;
    padding: 25px 20px;
    background: #111;
    border-radius: 15px;
    box-shadow: 0 0 25px #ff1493;
  }
  h1 {
    text-align:center;
    font-size:1.8rem;
    margin-bottom: 15px;
  }
  form {
    display:flex;
    flex-direction:column;
  }
  label {
    font-size:0.85rem;
    margin-bottom:5px;
    margin-top:10px;
  }
  input {
    padding:10px 12px;
    border-radius:8px;
    border:none;
    font-size:1rem;
    margin-bottom:5px;
    background:#222;
    color:#fff;
  }
  button {
    margin-top:15px;
    padding:12px;
    border:none;
    border-radius:8px;
    font-weight:bold;
    font-size:1rem;
    cursor:pointer;
    background: linear-gradient(90deg,#ff69b4,#ff1493);
    color:#fff;
  }
  .toggle-link {
    margin-top:15px;
    text-align:center;
    color:#ff69b4;
    font-size:0.9rem;
    cursor:pointer;
  }
  .error {
    font-size:0.8rem;
    color:#f00;
    margin-top:5px;
    text-align:center;
  }
</style>
</head>
<body>
<div class="container">
  <h1 id="formTitle">Sign Up</h1>
  <form id="girlForm">
    <!-- Sign Up Fields -->
    <div id="signupFields">
      <label for="name">Full Name</label>
      <input type="text" id="name" placeholder="Jane Doe" required>

      <label for="dob">Date of Birth</label>
      <input type="date" id="dob" required>

      <label for="phone">Phone Number</label>
      <input type="tel" id="phone" placeholder="08012345678" required>

      <label for="email">Email Address</label>
      <input type="email" id="email" placeholder="you@example.com" required>

      <label for="bank">Bank Name</label>
      <input type="text" id="bank" placeholder="Bank Name" required>

      <label for="account">Account Number</label>
      <input type="text" id="account" placeholder="0123456789" required>

      <label for="password">Password</label>
      <input type="password" id="password" placeholder="••••••••" required>
    </div>

    <!-- Login Fields -->
    <div id="loginFields" style="display:none;">
      <label for="loginEmail">Email</label>
      <input type="email" id="loginEmail" placeholder="you@example.com" required>
      <label for="loginPassword">Password</label>
      <input type="password" id="loginPassword" placeholder="••••••••" required>
    </div>

    <div class="error" id="errorMsg"></div>
    <button type="submit" id="submitBtn">Sign Up</button>
  </form>
  <div class="toggle-link" id="toggleForm">Already have an account? Log In</div>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDbKz4ef_eUDlCukjmnK38sOwueYuzqoao",
    authDomain: "metaverse-1010.firebaseapp.com",
    projectId: "metaverse-1010",
    storageBucket: "metaverse-1010.firebasestorage.app",
    messagingSenderId: "1044064238233",
    appId: "1:1044064238233:web:2fbdfb811cb0a3ba349608",
    measurementId: "G-S77BMC266C"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  const girlForm = document.getElementById('girlForm');
  const toggleForm = document.getElementById('toggleForm');
  const formTitle = document.getElementById('formTitle');
  const submitBtn = document.getElementById('submitBtn');
  const signupFields = document.getElementById('signupFields');
  const loginFields = document.getElementById('loginFields');
  const errorMsg = document.getElementById('errorMsg');

  let isLogin = false;

  toggleForm.addEventListener('click', () => {
    isLogin = !isLogin;
    if(isLogin){
      signupFields.style.display='none';
      loginFields.style.display='block';
      formTitle.innerText = 'Log In';
      submitBtn.innerText = 'Log In';
      toggleForm.innerText = "Don't have an account? Sign Up";
    } else {
      signupFields.style.display='block';
      loginFields.style.display='none';
      formTitle.innerText = 'Sign Up';
      submitBtn.innerText = 'Sign Up';
      toggleForm.innerText = "Already have an account? Log In";
    }
    errorMsg.innerText = '';
  });

  girlForm.addEventListener('submit', async (e)=>{
    e.preventDefault();
    errorMsg.innerText = '';

    if(isLogin){
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      try{
        await auth.signInWithEmailAndPassword(email,password);
        alert('Logged in successfully!');
      }catch(err){
        errorMsg.innerText = err.message;
      }
    }else{
      const name = document.getElementById('name').value;
      const dob = document.getElementById('dob').value;
      const phone = document.getElementById('phone').value;
      const email = document.getElementById('email').value;
      const bank = document.getElementById('bank').value;
      const account = document.getElementById('account').value;
      const password = document.getElementById('password').value;

      const dobDate = new Date(dob);
      const ageDifMs = Date.now() - dobDate.getTime();
      const ageDate = new Date(ageDifMs);
      const age = Math.abs(ageDate.getUTCFullYear() - 1970);
      if(age<18){
        errorMsg.innerText = 'You must be 18 or older to sign up.';
        return;
      }

      try{
        const userCredential = await auth.createUserWithEmailAndPassword(email,password);
        const uid = userCredential.user.uid;
        await db.collection('girls').doc(uid).set({
          name, dob, phone, email, bank, account, stars:0, cash:0, createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        alert('Sign up successful!');
      }catch(err){
        errorMsg.innerText = err.message;
      }
    }
  });
</script>
</body>
</html>