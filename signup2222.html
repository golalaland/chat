<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
<title>Xixi Chatroom</title>
<link rel="icon" href="data:," />
<style>
:root{
  --bg:#000;
  --card:#111;
  --muted:#aaa;
  --accent:#FF1493;
  --glass: rgba(255,255,255,0.03);
}

/* Overall layout */
html, body {
  height:100%;
  margin:0;
  font-family:'XiXi',Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
  color:#fff;
  background:var(--bg);
}
#appWrapper{
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
}
.app{
  display:flex;
  flex-direction:column;
  height:100%;
  gap:10px;
  padding:10px;
  box-sizing:border-box;
  width:100%;
  max-width:480px;
}
.brand{
  font-weight:700;
  font-size:24px;
  color:var(--accent);
  text-align:center;
}
.room-desc{font-size:11px;color:var(--muted);text-align:center;margin-bottom:6px;}
#greeting{font-size:13px;text-align:center;font-weight:600;margin-bottom:6px;color:var(--accent);}
#helloText{font-size:20px;font-weight:800;text-align:center;margin:6px 0;color:#fff;transition:color .2s ease;}
#center{flex:1;display:flex;flex-direction:column;gap:6px;overflow:hidden;position:relative;}

/* Sticky video wrapper */
#videoWrapper {
    position: sticky;
    top: 0;
    z-index: 50; /* above messages but below popups */
    width: 100%;
    aspect-ratio: 16/9;
    border-radius: 10px;
    overflow: hidden;
    background: #111;
}
#videoContainer, #videoPlayer {
  width: 100%;
  height: 100%;
  border-radius: 10px;
  overflow: hidden;
  object-fit: cover;
}
#videoWrapper .nav-buttons {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 6px;
  position: absolute;
  bottom: 6px;
  width: 100%;
  pointer-events: auto;
}
#videoWrapper .nav-buttons button {
  padding: 6px 10px;
  font-size: 13px;
  border-radius: 8px;
  border: 1px solid rgba(255,20,147,0.2);
  background: rgba(30,30,30,0.7);
  color: var(--accent);
  cursor: pointer;
}
#videoWrapper .nav-buttons button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(255,20,147,0.3);
}

/* Arrows */
.arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 24px;
  background: rgba(0,0,0,0.3);
  color: #fff;
  border: none;
  padding: 10px;
  cursor: pointer;
  border-radius: 50%;
  z-index: 10;
  opacity: 1;
  transition: opacity 0.5s ease;
}
.arrow.hidden { opacity:0; pointer-events:none; }
#prev { left: 5px; }
#next { right: 5px; }

/* Messages */
#messages {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    border-radius: 8px;
    background: #000;
    box-sizing: border-box;
    margin-top: 6px;
}
.msg {
  padding: 8px 10px;
  border-radius: 8px;
  background: var(--glass);
  max-width: 100%;
  display: flex;
  gap: 8px;
  align-items: center;
}
.msg.me { background: rgba(255, 20, 147, 0.06); }
.msg .meta {
  font-weight: 700;
  font-size: 13px;
  white-space: nowrap;
  margin-right: 4px;
  color: inherit;
}
.msg .content {
  font-size: 13px;
  color: #fff;
  white-space: pre-wrap;
  word-break: break-word;
  display: inline-block;
}

/* Chat input */
.send-area {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--card);
  padding: 10px;
  border-radius: 999px;
  width: 100%;
  box-sizing: border-box;
  position: sticky;
  bottom: 0;
  z-index: 10;
  border-top: 1px solid rgba(255,255,255,0.04);
}
.send-area input {
  flex: 1;
  padding: 12px 16px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.08);
  background-color: #0e0e0e;
  color: #fff;
  font-size: 16px;
  outline: none;
  transition: all 0.2s ease-in-out;
}
.send-area input::placeholder { color: var(--muted); opacity: 0.7; }
.send-area input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 12px rgba(255, 20, 147, 0.15);
}
.send-btn {
  padding: 10px 16px;
  border-radius: 999px;
  background-color: var(--accent);
  color: #000;
  cursor: pointer;
  font-weight: 700;
  border: none;
  font-size: 14px;
  transition: all 0.2s ease;
}
.send-btn:hover { background-color: #ff33a1; transform: scale(1.05); }
.buzz-btn {
  padding:10px 12px;
  border-radius:999px;
  background:#1d1d1d;
  color:var(--accent);
  cursor:pointer;
  font-weight:700;
  font-size:14px;
  border:1px solid rgba(255,20,147,0.18);
}
.buzz-btn:hover { animation:buzzPulse 1.5s infinite; }
@keyframes buzzPulse{0%{box-shadow:0 0 0 0 rgba(255,20,147,0.18)}70%{box-shadow:0 0 0 12px rgba(255,20,147,0)}100%{box-shadow:0 0 0 0 rgba(255,20,147,0)}}

/* Glass bar */
.glass-bar {
  width: 100%;
  max-width: 480px;
  margin: 6px auto 0 auto;
  height: 60px;
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(12px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 16px;
  box-sizing: border-box;
  border-radius: 12px;
  z-index: 5;
  box-shadow: 0 0 12px rgba(255, 20, 147, 0.25),
              0 0 24px rgba(255, 20, 147, 0.15);
  transition: transform 0.2s ease, box-shadow 0.3s ease;
}
.send-area:focus-within + .glass-bar {
  transform: translateY(2px);
  box-shadow: 0 0 16px rgba(255, 20, 147, 0.45),
              0 0 32px rgba(255, 20, 147, 0.25);
}

/* Profile */
.profile{display:none;flex-direction:column;gap:8px;margin-top:10px;}
.profile-card{background:var(--glass);padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);display:flex;flex-direction:column;gap:8px;}
.profile-top{display:flex;align-items:center;justify-content:space-between;gap:10px;}
.profile-left{display:flex;flex-direction:column;gap:2px;}
.profile-name{font-weight:800;}
.profile-label{font-weight:800;font-size:10px;color:var(--accent);}
.profile-value{color:#fff;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,"Roboto Mono","Courier New",monospace;font-weight:400;font-size:11px;}
.profile-actions{display:flex;gap:8px;align-items:center;justify-content:flex-end;}
.small-btn{padding:6px 12px;border-radius:8px;background:var(--accent);border:0;color:#000;cursor:pointer;font-weight:700;font-size:14px;transition: transform .15s, box-shadow .15s;}
.small-btn:hover{transform: translateY(-2px);box-shadow: 0 4px 10px rgba(255,20,147,0.3);}

/* Misc */
.onlineCount{font-size:11px;color:var(--muted);}
.room-subtitle {
  font-size: 12px;
  font-weight: 600;
  text-align: center;
  margin-top: 4px;
  font-family: 'Montserrat', sans-serif;
  color: var(--accent);
  letter-spacing: 0.5px;
  opacity: 0.85;
  transition: color 0.2s ease;
}
.room-subtitle:hover { color:#fff; }

/* Loading overlay */
#loadingOverlay{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:#000;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
#loadingOverlay div{
  font-family:Montserrat,sans-serif;
  font-size:1.2rem;
  color:#fff;
  margin-bottom:16px;
}
#loadingBarWrapper{
  width:80%;
  max-width:400px;
  height:8px;
  background:rgba(255,255,255,0.1);
  border-radius:8px;
  overflow:hidden;
}
#loadingBar{
  width:0%;
  height:100%;
  background:linear-gradient(90deg,#FF1493,#FF69B4);
  transition:width 0.3s ease;
}

/* Responsive */
@media (max-width:420px){
  .send-area input{padding:10px;font-size:13px;}
  .buzz-btn,.send-btn{padding:8px 10px;font-size:13px;}
}
</style>
</head>
<body>

<audio id="buzz-sound" src="https://pixabay.com/sound-effects/buzz-01-0-07.mp3" preload="auto"></audio>

<!-- Loading overlay -->
<div id="loadingOverlay">
  <div>Loading Chatroom...</div>
  <div id="loadingBarWrapper">
    <div id="loadingBar"></div>
  </div>
</div>

<div id="appWrapper">
  <div class="app">
    <div class="brand">‰πÇ‰∏®‰πÇ‰∏®</div>
    <div id="greeting">Chat. Own Your Vibe.</div>
    <div id="center">

      <!-- Sticky video -->
      <div id="videoWrapper">
          <video id="videoPlayer" muted playsinline></video>
          <button class="arrow" id="prev">&#10094;</button>
          <button class="arrow" id="next">&#10095;</button>
      </div>

      <!-- Messages & info -->
      <div id="helloText" aria-live="polite">HELLO</div>
      <div class="room-desc">
        <span id="onlineCount" class="onlineCount"></span>
        <div id="guestMsg"></div>
        <div id="messages"></div>
      </div>

      <!-- Chat input -->
      <div class="send-area" id="sendArea" style="display:none;">
        <input type="text" id="messageInput" placeholder="Type your message..." autocomplete="off" />
        <button id="buzzBtn" class="buzz-btn" title="Send BUZZ üö®">üö®</button>
        <button id="sendBtn" class="send-btn">Send</button>
      </div>

      <!-- Profile bar -->
      <div class="profile" id="profileBox">
        <div class="profile-card">
          <div class="profile-top">
            <div class="profile-left">
              <div id="profileName" class="profile-name">GUEST 0000</div>
              <div>
                <span class="profile-label">STARS COLLECTED:</span>
                <span class="profile-value"><span id="starCount">0</span>‚≠êÔ∏è</span>
              </div>
            </div>
            <div class="profile-actions">
              <button id="tipBtn" class="small-btn">üíµ</button>
            </div>
          </div>
          <div>
            <span class="profile-label">CASH EARNED:</span>
            <span class="profile-value">‚Ç¶<span id="cashCount">0</span></span>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script type="module" src="newchatroom.js"></script>
</body>
</html>